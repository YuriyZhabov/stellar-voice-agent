# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã LiveKit

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–∏—Å—Ç–µ–º—ã LiveKit, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å Voice AI Agent. –í–∫–ª—é—á–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –º–µ—Ç—Ä–∏–∫, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∏ –ø–ª–∞–Ω—ã —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã.

## 1. –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### 1.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Application   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Metrics        ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Prometheus    ‚îÇ
‚îÇ   Components    ‚îÇ    ‚îÇ   Collection     ‚îÇ    ‚îÇ   Server        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚ñº
‚îÇ   Health Check  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Alert Manager  ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Endpoints     ‚îÇ    ‚îÇ   & Notifications‚îÇ    ‚îÇ   Grafana       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   Dashboard     ‚îÇ
                                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.2 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### Health Check Endpoints

```python
# –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
GET /health                    # –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
GET /health/detailed          # –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
GET /health/livekit          # –°–æ—Å—Ç–æ—è–Ω–∏–µ LiveKit API
GET /health/sip              # –°–æ—Å—Ç–æ—è–Ω–∏–µ SIP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
GET /health/ai               # –°–æ—Å—Ç–æ—è–Ω–∏–µ AI —Å–µ—Ä–≤–∏—Å–æ–≤
GET /health/database         # –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
GET /health/redis            # –°–æ—Å—Ç–æ—è–Ω–∏–µ Redis –∫—ç—à–∞
```

#### Prometheus Metrics

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
livekit_api_requests_total           # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∑–∞–ø—Ä–æ—Å–æ–≤
livekit_api_request_duration_seconds # –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
livekit_rooms_active                 # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
livekit_participants_active          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
livekit_connections_total            # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
livekit_connection_errors_total      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
livekit_sip_calls_active            # –ê–∫—Ç–∏–≤–Ω—ã–µ SIP –∑–≤–æ–Ω–∫–∏
livekit_sip_call_duration_seconds   # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å SIP –∑–≤–æ–Ω–∫–æ–≤
livekit_audio_quality_score         # –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∞—É–¥–∏–æ
livekit_system_cpu_usage            # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU
livekit_system_memory_usage         # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
```

### 1.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus

```yaml
# monitoring/prometheus/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "rules/*.yml"

scrape_configs:
  - job_name: 'livekit-voice-ai'
    static_configs:
      - targets: ['localhost:8000']
    scrape_interval: 10s
    metrics_path: '/metrics'
    
  - job_name: 'livekit-server'
    static_configs:
      - targets: ['your-livekit-server.com:7880']
    scrape_interval: 30s

alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - alertmanager:9093
```

#### Grafana Dashboard

```json
{
  "dashboard": {
    "title": "LiveKit Voice AI System",
    "panels": [
      {
        "title": "API Response Time",
        "type": "graph",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, livekit_api_request_duration_seconds_bucket)",
            "legendFormat": "95th percentile"
          }
        ]
      },
      {
        "title": "Active Rooms & Participants",
        "type": "stat",
        "targets": [
          {
            "expr": "livekit_rooms_active",
            "legendFormat": "Active Rooms"
          },
          {
            "expr": "livekit_participants_active",
            "legendFormat": "Active Participants"
          }
        ]
      }
    ]
  }
}
```

## 2. –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### 2.1 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ |
|---------|-------------------|----------------|-------------|
| API Latency (95th percentile) | < 100ms | 100-500ms | > 500ms |
| CPU Usage | < 70% | 70-85% | > 85% |
| Memory Usage | < 80% | 80-90% | > 90% |
| Disk Usage | < 80% | 80-90% | > 90% |
| Error Rate | < 1% | 1-5% | > 5% |

### 2.2 LiveKit —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ |
|---------|-------------------|----------------|-------------|
| Room Creation Success Rate | > 99% | 95-99% | < 95% |
| Participant Connection Success | > 98% | 95-98% | < 95% |
| Audio Quality Score | > 4.0/5.0 | 3.0-4.0 | < 3.0 |
| SIP Call Success Rate | > 95% | 90-95% | < 90% |
| Token Refresh Success Rate | > 99.5% | 99-99.5% | < 99% |

### 2.3 –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ |
|---------|-------------------|----------------|-------------|
| Average Call Duration | 2-10 minutes | < 1 minute | < 30 seconds |
| Calls per Hour | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ | –†–µ–∑–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ | –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ |
| AI Response Time | < 2 seconds | 2-5 seconds | > 5 seconds |
| Voice Recognition Accuracy | > 90% | 80-90% | < 80% |

## 3. –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 3.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤

```yaml
# monitoring/prometheus/rules/livekit_alerts.yml
groups:
  - name: livekit.rules
    rules:
      # High API Latency
      - alert: HighAPILatency
        expr: histogram_quantile(0.95, livekit_api_request_duration_seconds_bucket) > 0.5
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High API latency detected"
          description: "95th percentile latency is {{ $value }}s"
      
      # High Error Rate
      - alert: HighErrorRate
        expr: rate(livekit_connection_errors_total[5m]) / rate(livekit_connections_total[5m]) > 0.05
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "High error rate detected"
          description: "Error rate is {{ $value | humanizePercentage }}"
      
      # System Resource Usage
      - alert: HighCPUUsage
        expr: livekit_system_cpu_usage > 85
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High CPU usage"
          description: "CPU usage is {{ $value }}%"
      
      # SIP Call Issues
      - alert: SIPCallFailures
        expr: rate(livekit_sip_call_failures_total[5m]) > 0.1
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "SIP call failures detected"
          description: "SIP call failure rate is {{ $value }}/min"
```

### 3.2 –ö–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### Slack Integration

```python
# src/monitoring/alerting.py
import requests
import json

class SlackAlerting:
    def __init__(self, webhook_url: str):
        self.webhook_url = webhook_url
    
    async def send_alert(self, alert_data: dict):
        """–û—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–∞ –≤ Slack."""
        
        color = {
            'critical': '#FF0000',
            'warning': '#FFA500',
            'info': '#00FF00'
        }.get(alert_data.get('severity', 'info'), '#808080')
        
        message = {
            "attachments": [
                {
                    "color": color,
                    "title": f"üö® {alert_data['alert_name']}",
                    "text": alert_data['description'],
                    "fields": [
                        {
                            "title": "Severity",
                            "value": alert_data['severity'].upper(),
                            "short": True
                        },
                        {
                            "title": "Component",
                            "value": alert_data.get('component', 'Unknown'),
                            "short": True
                        },
                        {
                            "title": "Timestamp",
                            "value": alert_data['timestamp'],
                            "short": False
                        }
                    ]
                }
            ]
        }
        
        response = requests.post(
            self.webhook_url,
            data=json.dumps(message),
            headers={'Content-Type': 'application/json'}
        )
        
        return response.status_code == 200
```

#### Email Notifications

```python
import smtplib
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart

class EmailAlerting:
    def __init__(self, smtp_server: str, smtp_port: int, username: str, password: str):
        self.smtp_server = smtp_server
        self.smtp_port = smtp_port
        self.username = username
        self.password = password
    
    async def send_alert_email(self, alert_data: dict, recipients: list):
        """–û—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–∞ –ø–æ email."""
        
        msg = MIMEMultipart()
        msg['From'] = self.username
        msg['To'] = ', '.join(recipients)
        msg['Subject'] = f"[{alert_data['severity'].upper()}] {alert_data['alert_name']}"
        
        body = f"""
        Alert: {alert_data['alert_name']}
        Severity: {alert_data['severity']}
        Component: {alert_data.get('component', 'Unknown')}
        Description: {alert_data['description']}
        Timestamp: {alert_data['timestamp']}
        
        Please check the system dashboard for more details.
        """
        
        msg.attach(MIMEText(body, 'plain'))
        
        with smtplib.SMTP(self.smtp_server, self.smtp_port) as server:
            server.starttls()
            server.login(self.username, self.password)
            server.send_message(msg)
```

## 4. –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

### 4.1 –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
#!/bin/bash
# scripts/daily_health_check.sh

echo "=== Daily Health Check $(date) ==="

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
echo "1. System Health Check:"
curl -s http://localhost:8000/health | jq '.'

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
echo "2. Error Log Check:"
grep -i error logs/livekit_system.log | tail -10

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
echo "3. Resource Usage:"
df -h | grep -E '(Filesystem|/dev/)'
free -h
top -bn1 | head -5

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
echo "4. Active Connections:"
netstat -an | grep :8000 | wc -l

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
echo "5. Redis Status:"
redis-cli ping

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "6. Database Status:"
python -c "
from src.database.connection import DatabaseConnection
db = DatabaseConnection()
print(f'Database connection: {db.test_connection()}')
"

echo "=== Health Check Complete ==="
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫

```python
#!/usr/bin/env python3
# scripts/daily_metrics_report.py

import asyncio
import json
from datetime import datetime, timedelta, UTC
from src.monitoring.livekit_system_monitor import LiveKitSystemMonitor
from src.clients.livekit_api_client import LiveKitAPIClient

async def generate_daily_report():
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º."""
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    api_client = LiveKitAPIClient(
        url=os.getenv('LIVEKIT_URL'),
        api_key=os.getenv('LIVEKIT_API_KEY'),
        api_secret=os.getenv('LIVEKIT_API_SECRET')
    )
    monitor = LiveKitSystemMonitor(api_client)
    
    # –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫
    health_status = await monitor.run_health_checks()
    performance = await monitor._check_performance()
    
    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
    report = {
        "date": datetime.now(UTC).strftime("%Y-%m-%d"),
        "health_status": health_status,
        "performance_metrics": performance,
        "summary": {
            "overall_health": "healthy" if all(
                check["status"] == "healthy" 
                for check in health_status["checks"].values()
            ) else "degraded",
            "avg_api_latency": performance["avg_api_latency_ms"],
            "active_rooms": performance["active_rooms"],
            "error_rate": performance["error_rate"]
        }
    }
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
    report_file = f"reports/daily_report_{report['date']}.json"
    with open(report_file, 'w') as f:
        json.dump(report, f, indent=2)
    
    print(f"Daily report saved to {report_file}")
    return report

if __name__ == "__main__":
    asyncio.run(generate_daily_report())
```

### 4.2 –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
#!/bin/bash
# scripts/weekly_performance_analysis.sh

echo "=== Weekly Performance Analysis $(date) ==="

# 1. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é
echo "1. Log Analysis (Last 7 days):"
find logs/ -name "*.log" -mtime -7 -exec grep -l "ERROR\|CRITICAL" {} \;

# 2. –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
echo "2. Performance Trends:"
python scripts/analyze_performance_trends.py --days 7

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ—Å—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
echo "3. Data Growth Analysis:"
du -sh data/ logs/ backups/

# 4. –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
echo "4. Resource Usage Trends:"
sar -u 1 1  # CPU usage
sar -r 1 1  # Memory usage
sar -d 1 1  # Disk I/O

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ SSL
echo "5. SSL Certificate Check:"
openssl x509 -in /path/to/cert.pem -text -noout | grep "Not After"

echo "=== Weekly Analysis Complete ==="
```

#### –û—á–∏—Å—Ç–∫–∞ –∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
#!/usr/bin/env python3
# scripts/weekly_cleanup.py

import os
import shutil
import gzip
from datetime import datetime, timedelta, UTC
from pathlib import Path

def cleanup_old_logs(log_dir: str = "logs", days_to_keep: int = 30):
    """–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤."""
    
    cutoff_date = datetime.now(UTC) - timedelta(days=days_to_keep)
    log_path = Path(log_dir)
    
    for log_file in log_path.glob("*.log"):
        if log_file.stat().st_mtime < cutoff_date.timestamp():
            # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
            archive_name = f"{log_file}.{cutoff_date.strftime('%Y%m%d')}.gz"
            with open(log_file, 'rb') as f_in:
                with gzip.open(archive_name, 'wb') as f_out:
                    shutil.copyfileobj(f_in, f_out)
            
            log_file.unlink()
            print(f"Archived and removed: {log_file}")

def cleanup_old_recordings(recordings_dir: str = "recordings", days_to_keep: int = 90):
    """–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π."""
    
    cutoff_date = datetime.now(UTC) - timedelta(days=days_to_keep)
    recordings_path = Path(recordings_dir)
    
    if not recordings_path.exists():
        return
    
    for recording_file in recordings_path.rglob("*"):
        if recording_file.is_file() and recording_file.stat().st_mtime < cutoff_date.timestamp():
            recording_file.unlink()
            print(f"Removed old recording: {recording_file}")

def cleanup_temp_files(temp_dir: str = "/tmp", pattern: str = "livekit_*"):
    """–û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤."""
    
    temp_path = Path(temp_dir)
    for temp_file in temp_path.glob(pattern):
        if temp_file.is_file():
            temp_file.unlink()
            print(f"Removed temp file: {temp_file}")

if __name__ == "__main__":
    print("Starting weekly cleanup...")
    cleanup_old_logs()
    cleanup_old_recordings()
    cleanup_temp_files()
    print("Weekly cleanup complete.")
```

### 4.3 –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã

```python
#!/usr/bin/env python3
# scripts/monthly_system_audit.py

import asyncio
import json
from datetime import datetime, UTC
from src.security.livekit_security import LiveKitSecurityManager
from src.monitoring.livekit_system_monitor import LiveKitSystemMonitor

async def monthly_audit():
    """–ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ —Å–∏—Å—Ç–µ–º—ã."""
    
    audit_results = {
        "audit_date": datetime.now(UTC).isoformat(),
        "security_audit": {},
        "performance_audit": {},
        "configuration_audit": {},
        "recommendations": []
    }
    
    # 1. –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    security_manager = LiveKitSecurityManager(
        os.getenv('LIVEKIT_API_KEY'),
        os.getenv('LIVEKIT_API_SECRET')
    )
    
    security_results = await security_manager.run_security_audit()
    audit_results["security_audit"] = security_results
    
    # 2. –ê—É–¥–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    monitor = LiveKitSystemMonitor(api_client)
    performance_results = await monitor.run_performance_audit()
    audit_results["performance_audit"] = performance_results
    
    # 3. –ê—É–¥–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    config_results = audit_configuration()
    audit_results["configuration_audit"] = config_results
    
    # 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    recommendations = generate_recommendations(audit_results)
    audit_results["recommendations"] = recommendations
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    audit_file = f"audits/monthly_audit_{datetime.now(UTC).strftime('%Y%m')}.json"
    with open(audit_file, 'w') as f:
        json.dump(audit_results, f, indent=2)
    
    print(f"Monthly audit completed. Results saved to {audit_file}")
    return audit_results

def audit_configuration():
    """–ê—É–¥–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã."""
    
    config_issues = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    required_vars = [
        'LIVEKIT_URL', 'LIVEKIT_API_KEY', 'LIVEKIT_API_SECRET',
        'SIP_SERVER', 'SIP_USERNAME', 'SIP_PASSWORD'
    ]
    
    for var in required_vars:
        if not os.getenv(var):
            config_issues.append(f"Missing environment variable: {var}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
    config_files = [
        'config/livekit_auth.yaml',
        'config/monitoring.yaml',
        'config/security.yaml',
        'livekit-sip-correct.yaml'
    ]
    
    for config_file in config_files:
        if not os.path.exists(config_file):
            config_issues.append(f"Missing configuration file: {config_file}")
    
    return {
        "issues_found": len(config_issues),
        "issues": config_issues,
        "status": "healthy" if len(config_issues) == 0 else "needs_attention"
    }

def generate_recommendations(audit_results):
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞—É–¥–∏—Ç–∞."""
    
    recommendations = []
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    security_audit = audit_results["security_audit"]
    failed_checks = [
        check for check, result in security_audit.items()
        if not result.get("passed", True)
    ]
    
    if failed_checks:
        recommendations.append({
            "category": "security",
            "priority": "high",
            "description": f"Address failed security checks: {', '.join(failed_checks)}"
        })
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    performance_audit = audit_results["performance_audit"]
    if performance_audit.get("avg_api_latency_ms", 0) > 100:
        recommendations.append({
            "category": "performance",
            "priority": "medium",
            "description": "API latency is above recommended threshold. Consider optimization."
        })
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    config_audit = audit_results["configuration_audit"]
    if config_audit["issues_found"] > 0:
        recommendations.append({
            "category": "configuration",
            "priority": "high",
            "description": "Configuration issues found. Review and fix missing components."
        })
    
    return recommendations

if __name__ == "__main__":
    asyncio.run(monthly_audit())
```

## 5. –ü–ª–∞–Ω—ã —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

### 5.1 –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤

#### Severity Levels

| Level | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ä–µ–º—è —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è | –≠—Å–∫–∞–ª–∞—Ü–∏—è |
|-------|----------|-------------------|-----------|
| P1 - Critical | –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ —Å–∏—Å—Ç–µ–º—ã | 15 –º–∏–Ω—É—Ç | –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è |
| P2 - High | –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | 1 —á–∞—Å | 2 —á–∞—Å–∞ |
| P3 - Medium | –ß–∞—Å—Ç–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∞ | 4 —á–∞—Å–∞ | 8 —á–∞—Å–æ–≤ |
| P4 - Low | –ú–∏–Ω–æ—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã | 24 —á–∞—Å–∞ | 48 —á–∞—Å–æ–≤ |

#### –¢–∏–ø—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤

1. **–û—Ç–∫–∞–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è/–≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
2. **–û—Ç–∫–∞–∑ API** - –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å LiveKit API
3. **–ü—Ä–æ–±–ª–µ–º—ã SIP** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å/—Å–æ–≤–µ—Ä—à–∞—Ç—å –∑–≤–æ–Ω–∫–∏
4. **–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –≤—ã—Å–æ–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –Ω–∏–∑–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
5. **–ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 5.2 –ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### P1 - Critical Incident Response

```bash
#!/bin/bash
# scripts/critical_incident_response.sh

echo "=== CRITICAL INCIDENT RESPONSE ==="
echo "Timestamp: $(date)"

# 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
echo "1. Running immediate diagnostics..."
python scripts/diagnose_livekit_connection.py > incident_diagnostics.log 2>&1

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
echo "2. Checking core services..."
systemctl status redis-server
systemctl status nginx
curl -s http://localhost:8000/health || echo "Health check failed"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
echo "3. Checking for critical errors..."
tail -100 logs/livekit_system.log | grep -i "critical\|fatal\|error"

# 4. –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
echo "4. Attempting automatic recovery..."
./scripts/auto_recovery.sh

# 5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
echo "5. Notifying incident response team..."
python scripts/send_critical_alert.py --incident="System failure detected"

echo "=== CRITICAL INCIDENT RESPONSE COMPLETE ==="
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```python
#!/usr/bin/env python3
# scripts/auto_recovery.py

import asyncio
import subprocess
import time
from src.clients.livekit_api_client import LiveKitAPIClient
from src.monitoring.livekit_system_monitor import LiveKitSystemMonitor

async def attempt_auto_recovery():
    """–ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã."""
    
    recovery_steps = [
        ("restart_redis", restart_redis),
        ("restart_application", restart_application),
        ("clear_cache", clear_cache),
        ("reload_configuration", reload_configuration),
        ("test_connectivity", test_connectivity)
    ]
    
    recovery_log = []
    
    for step_name, step_function in recovery_steps:
        print(f"Executing recovery step: {step_name}")
        
        try:
            result = await step_function()
            recovery_log.append({
                "step": step_name,
                "status": "success",
                "result": result,
                "timestamp": time.time()
            })
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
            if await test_system_health():
                print(f"System recovered after step: {step_name}")
                return recovery_log
                
        except Exception as e:
            recovery_log.append({
                "step": step_name,
                "status": "failed",
                "error": str(e),
                "timestamp": time.time()
            })
            print(f"Recovery step failed: {step_name} - {e}")
    
    print("Automatic recovery failed. Manual intervention required.")
    return recovery_log

async def restart_redis():
    """–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Redis —Å–µ—Ä–≤–µ—Ä–∞."""
    result = subprocess.run(['systemctl', 'restart', 'redis-server'], 
                          capture_output=True, text=True)
    if result.returncode != 0:
        raise Exception(f"Redis restart failed: {result.stderr}")
    return "Redis restarted successfully"

async def restart_application():
    """–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."""
    # Graceful shutdown
    subprocess.run(['pkill', '-TERM', '-f', 'src/main.py'])
    time.sleep(5)
    
    # Force kill if still running
    subprocess.run(['pkill', '-KILL', '-f', 'src/main.py'])
    time.sleep(2)
    
    # Restart application
    subprocess.Popen(['python', 'src/main.py'])
    time.sleep(10)  # Wait for startup
    
    return "Application restarted"

async def clear_cache():
    """–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞."""
    import redis
    r = redis.Redis(host='localhost', port=6379, db=0)
    r.flushdb()
    return "Cache cleared"

async def reload_configuration():
    """–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."""
    # Reload environment variables
    subprocess.run(['systemctl', 'daemon-reload'])
    return "Configuration reloaded"

async def test_connectivity():
    """–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º."""
    # Test LiveKit API
    try:
        api_client = LiveKitAPIClient(
            url=os.getenv('LIVEKIT_URL'),
            api_key=os.getenv('LIVEKIT_API_KEY'),
            api_secret=os.getenv('LIVEKIT_API_SECRET')
        )
        rooms = await api_client.list_rooms()
        return f"LiveKit API accessible. Found {len(rooms)} rooms."
    except Exception as e:
        raise Exception(f"LiveKit API test failed: {e}")

async def test_system_health():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã."""
    try:
        monitor = LiveKitSystemMonitor(api_client)
        health_status = await monitor.run_health_checks()
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
        critical_components = ['room_service', 'sip_service']
        for component in critical_components:
            if health_status['checks'].get(component, {}).get('status') != 'healthy':
                return False
        
        return True
    except:
        return False

if __name__ == "__main__":
    asyncio.run(attempt_auto_recovery())
```

### 5.3 –ü—Ä–æ—Ü–µ–¥—É—Ä—ã —ç—Å–∫–∞–ª–∞—Ü–∏–∏

#### –ú–∞—Ç—Ä–∏—Ü–∞ —ç—Å–∫–∞–ª–∞—Ü–∏–∏

```
Level 1: Automated Response (0-15 min)
‚îú‚îÄ‚îÄ Automatic diagnostics
‚îú‚îÄ‚îÄ Auto-recovery attempts
‚îî‚îÄ‚îÄ Initial alerts

Level 2: On-call Engineer (15 min - 1 hour)
‚îú‚îÄ‚îÄ Manual diagnostics
‚îú‚îÄ‚îÄ Immediate fixes
‚îî‚îÄ‚îÄ Status updates

Level 3: Senior Engineer (1-2 hours)
‚îú‚îÄ‚îÄ Complex troubleshooting
‚îú‚îÄ‚îÄ Architecture decisions
‚îî‚îÄ‚îÄ Vendor escalation

Level 4: Management (2+ hours)
‚îú‚îÄ‚îÄ Customer communication
‚îú‚îÄ‚îÄ Resource allocation
‚îî‚îÄ‚îÄ Post-incident review
```

#### –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —ç—Å–∫–∞–ª–∞—Ü–∏–∏

```yaml
# config/incident_contacts.yaml
escalation_contacts:
  level_1:
    - type: "automated"
      action: "run_diagnostics"
      
  level_2:
    - name: "On-call Engineer"
      phone: "+1-555-0123"
      email: "oncall@company.com"
      slack: "@oncall-engineer"
      
  level_3:
    - name: "Senior Engineer"
      phone: "+1-555-0456"
      email: "senior@company.com"
      slack: "@senior-engineer"
      
  level_4:
    - name: "Engineering Manager"
      phone: "+1-555-0789"
      email: "manager@company.com"
      slack: "@eng-manager"

notification_channels:
  critical:
    - slack: "#incidents"
    - email: "team@company.com"
    - sms: "+1-555-ALERT"
    
  high:
    - slack: "#alerts"
    - email: "oncall@company.com"
    
  medium:
    - slack: "#monitoring"
    
  low:
    - email: "logs@company.com"
```

## 6. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### 6.1 –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ß—Ç–æ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç—Å—è

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**
   - `.env` —Ñ–∞–π–ª—ã
   - YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
   - SQLite —Ñ–∞–π–ª—ã
   - –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

3. **–õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã**
   - –ê—Ä—Ö–∏–≤–Ω—ã–µ –ª–æ–≥–∏
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –ê—É–¥–∏—Ç –ª–æ–≥–∏

4. **–ó–∞–ø–∏—Å–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤** (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)
   - –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–µ–π

#### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# Crontab entries for backup schedule

# –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (2:00 AM)
0 2 * * * /path/to/scripts/backup_configs.sh

# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Sunday 3:00 AM)
0 3 * * 0 /path/to/scripts/backup_database.sh

# –ï–∂–µ–º–µ—Å—è—á–Ω–æ–µ –ø–æ–ª–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (1st day 4:00 AM)
0 4 1 * * /path/to/scripts/full_backup.sh
```

#### –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
#!/bin/bash
# scripts/backup.sh

BACKUP_DIR="/backups"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
BACKUP_NAME="livekit_backup_${TIMESTAMP}"
BACKUP_PATH="${BACKUP_DIR}/${BACKUP_NAME}"

echo "Starting backup: ${BACKUP_NAME}"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
mkdir -p "${BACKUP_PATH}"

# 1. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
echo "Backing up configurations..."
cp -r config/ "${BACKUP_PATH}/"
cp .env* "${BACKUP_PATH}/"
cp *.yaml "${BACKUP_PATH}/"

# 2. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "Backing up database..."
mkdir -p "${BACKUP_PATH}/database"
cp data/*.db "${BACKUP_PATH}/database/" 2>/dev/null || true

# 3. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
echo "Backing up logs..."
mkdir -p "${BACKUP_PATH}/logs"
cp logs/*.log "${BACKUP_PATH}/logs/" 2>/dev/null || true

# 4. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
echo "Backing up scripts..."
cp -r scripts/ "${BACKUP_PATH}/"

# 5. –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
echo "Creating archive..."
cd "${BACKUP_DIR}"
tar -czf "${BACKUP_NAME}.tar.gz" "${BACKUP_NAME}"
rm -rf "${BACKUP_NAME}"

# 6. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
find "${BACKUP_DIR}" -name "livekit_backup_*.tar.gz" -mtime +30 -delete

echo "Backup completed: ${BACKUP_PATH}.tar.gz"

# 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏–≤–∞
if tar -tzf "${BACKUP_PATH}.tar.gz" >/dev/null 2>&1; then
    echo "Backup integrity check: PASSED"
else
    echo "Backup integrity check: FAILED"
    exit 1
fi
```

### 6.2 –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

```bash
#!/bin/bash
# scripts/restore.sh

if [ $# -ne 1 ]; then
    echo "Usage: $0 <backup_name>"
    echo "Available backups:"
    ls -1 /backups/livekit_backup_*.tar.gz | sed 's/.*livekit_backup_//' | sed 's/.tar.gz//'
    exit 1
fi

BACKUP_NAME="livekit_backup_$1"
BACKUP_FILE="/backups/${BACKUP_NAME}.tar.gz"

if [ ! -f "${BACKUP_FILE}" ]; then
    echo "Backup file not found: ${BACKUP_FILE}"
    exit 1
fi

echo "Restoring from backup: ${BACKUP_NAME}"

# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
echo "Stopping services..."
systemctl stop livekit-voice-ai
systemctl stop redis-server

# 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
echo "Creating current state backup..."
./scripts/backup.sh

# 3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞
echo "Extracting backup..."
cd /tmp
tar -xzf "${BACKUP_FILE}"

# 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
echo "Restoring configurations..."
cp -r "/tmp/${BACKUP_NAME}/config/"* config/
cp "/tmp/${BACKUP_NAME}/.env"* ./ 2>/dev/null || true
cp "/tmp/${BACKUP_NAME}/"*.yaml ./ 2>/dev/null || true

# 5. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "Restoring database..."
cp "/tmp/${BACKUP_NAME}/database/"*.db data/ 2>/dev/null || true

# 6. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤
echo "Restoring scripts..."
cp -r "/tmp/${BACKUP_NAME}/scripts/"* scripts/

# 7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
echo "Setting permissions..."
chmod +x scripts/*.sh
chmod 600 .env*

# 8. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
echo "Starting services..."
systemctl start redis-server
sleep 5
systemctl start livekit-voice-ai

# 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
echo "Verifying restoration..."
sleep 10
curl -s http://localhost:8000/health | jq '.'

# 10. –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
rm -rf "/tmp/${BACKUP_NAME}"

echo "Restoration completed successfully"
```

## 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 7.1 Change Log Template

```markdown
# Change Log

## [Version] - YYYY-MM-DD

### Added
- New features and functionality

### Changed
- Changes to existing functionality

### Deprecated
- Features that will be removed in future versions

### Removed
- Features removed in this version

### Fixed
- Bug fixes

### Security
- Security improvements and fixes

### Performance
- Performance improvements

### Configuration
- Configuration changes required
```

### 7.2 –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π**
   - –°–æ–∑–¥–∞–Ω–∏–µ RFC (Request for Comments)
   - –û—Ü–µ–Ω–∫–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å–∏—Å—Ç–µ–º—É
   - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ downtime

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ staging environment
   - Regression testing
   - Performance testing

3. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**
   - Blue-green deployment
   - Canary releases
   - Rollback procedures

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - Post-deployment monitoring
   - Performance validation
   - Error tracking

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã LiveKit. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:

- –í—ã—Å–æ–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
- –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- –û–ø—Ç–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º

–û–±–Ω–æ–≤–ª—è–π—Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è —Å–∏—Å—Ç–µ–º—ã –∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –æ–ø—ã—Ç–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏.